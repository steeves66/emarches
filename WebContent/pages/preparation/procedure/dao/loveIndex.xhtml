<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//FR" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:panelGroup  layout="block" id="tableauBord" >
 <h:form id="motif">
	        <p:dialog  widgetVar="motif" modal="true"   showEffect="fade" hideEffect="fade" width="40%" closable="true" header="Motif de Retour">
					<div class="g12">
						<div class="panel-heading">
						Motif du retour du #{controleController.type} N° #{daoController.slctdTd.dacCode}  
						</div> 
					<div class="panel-body panel-body-nopadding">
	         
	                  <p:inputTextarea value="#{daoController.daostatut.hacCommentaire}" rows="4" cols="100" style="width:100%;" readonly="true"/>
	                  </div>
	                  <div class="par pull-right"> par:<strong>#{daoController.daostatut.fonLibelle}</strong></div>
                     <div class="panel-footer">
                      <p:commandLink styleClass="btn btn-warning" value="Fermer" oncomplete="PF('motif').hide()"/>
                     </div>
                    </div>
      </p:dialog>
    </h:form>
    
    <h:form id="differe">
	        <p:dialog  widgetVar="diff" modal="true"   showEffect="fade" hideEffect="fade" width="40%" closable="true" header="Motif">
					<div class="g12">
						<div class="panel-heading">
						Motif du retour du #{controleController.type} N° #{daoController.slctdTd.dacCode} de l'AC : #{daoController.slctdTd.dacFonCodAc}
						
						</div> 
					<div class="panel-body panel-body-nopadding">
	                 <div class="col-xs-12 col-sm-12">
						   <p:messages id="message" showDetail="false" autoUpdate="true"  closable="true"/>
						  <p:inputTextarea value="#{daoController.observation}" rows="4" cols="33" style="width:100%;"/>
						   </div>
	                  </div>
	                  
                     
                      <p:commandLink styleClass="btn btn-warning" value="Fermer" oncomplete="PF('diff').hide()"/>
                       &nbsp; &nbsp;
                      <p:commandLink styleClass="btn btn-success"  value="Valider" action="#{daoController.differer()}" oncomplete="PF('diff').hide()" update=":gnl"/>
                    </div>
      </p:dialog>
    </h:form>
    
    
       <h:form id="apercu">
	        <p:dialog  widgetVar="detailDlg" modal="true"  showEffect="fade" hideEffect="fade" width="50%" closable="true" header="">
				<div class="col-md-12">
	            <div class="box box-warning box-solid" >
		            <div class="box-header" style="background-color: #f88b2e">
			          <div class="col-md-11 "><div  style="color: #fff"> DETAIL</div></div>
			         <div class="col-md-1">
			          #{controleController.type} 
			         </div>
			         
			          <div class="col-md-3">
			     
			         </div>
			        </div>
		            <div class="box-body"> 
		            <div class="form-group ">
	                 <h:panelGrid style="width:100%; vertical-align: top;">
						 <p:dataTable id="ndTbleFonc" styleClass="table table-bordered table-hover" var="slctdTb" value="#{daoController.detailTB}"
						  emptyMessage="Aucun #{controleController.type} tronvé" scrollable="true" scrollHeight="120px">

                        <p:column headerText="N° #{controleController.type}" styleClass="col-sm-3" >
         				<h:outputText value="#{slctdTb.tdcLibelle}" />
				        </p:column>
				        
				        <p:column headerText="Objet" styleClass="col-sm-6" >
         				<h:outputText value="#{slctdTb.dacObjet}" />
				        </p:column>
				        
				        <p:column headerText="Type #{controleController.type}" styleClass="col-sm-3" >
         				<h:outputText value="#{slctdTb.tdcLibelle}" />
				        </p:column>
				       
         				 <p:column headerText="Type Marché" styleClass="col-sm-4" >
         				<h:outputText value="#{slctdTb.tymLibelleCourt}" />
				        </p:column> 
				       
         				<p:column headerText="Mode de Passation" styleClass="col-sm-4" >
         				<h:outputText value="#{slctdTb.mopLibelleLong}" />
				        </p:column> 
				        

						</p:dataTable>
						</h:panelGrid> 
	                   
	                </div>
		           </div>
	           </div>
	           <p:commandLink styleClass="btn btn-warning" value="Fermer" oncomplete="PF('detailDlg').hide()"/>
            </div>
      </p:dialog>
    </h:form>
    
    <h:form id="apercuDAOCharge">
	        <p:dialog  widgetVar="transDaoChargeDlg" modal="true"  showEffect="fade" hideEffect="fade" width="50%" closable="true" header="">
	         <div class="row">
                   <div class="col-xs-12"><p:messages id="message" showDetail="false" autoUpdate="true"  closable="true"/></div>
             </div>
				<div class="col-md-12">
		            <div class="box box-warning box-solid" >
		              <div class="box-header" style="background-color: #f88b2e">
			          <div class="col-md-12 "><div  style="color: #fff"> TRANSMISSION DU #{controleController.type} N°#{daoController.slctdTda.dafDacCode}</div></div>
			         </div>
			          <div class="box-body">
				      <div class="row">
		                  <div class="col-sm-3"><label class="pull-right">Type de Marché</label></div>
			                  <div class="col-sm-9">
			                   <label><h:outputText value="#{daoController.slctdTda.TTypeMarche.tymCode} : #{daoController.slctdTd.tymLibelleCourt}" styleClass="text-muted" style="width: 100%"/></label> 
		                  </div>
		             </div>
		             
		              <div class="row">
		                  <div class="col-sm-3"><label class="pull-right">Mode de Passation</label></div>
			                  <div class="col-sm-9">
			                   <label><h:outputText value="#{daoController.slctdTda.TModePassation.mopCode} : #{daoController.slctdTd.mopLibelleCourt}" styleClass="text-muted" style="width: 100%"/></label> 
		                  </div>
		             </div>
                
                 <div class="row">
		                  <div class="col-sm-3"><label class="pull-right">Objet</label></div>
			                  <div class="col-sm-9">
			                   <label><h:outputText value="#{daoController.slctdTda.dafDacObjet}" styleClass="text-muted" style="width: 100%"/></label> 
		                  </div>
		             </div>
			          </div>
		            </div>
	            </div>
	            
	            <div class="col-md-12">
	             <div class="form-group ">
	              <div class="col-xs-6 col-sm-8">
                     
                  </div>
	                </div>
	            <div class="col-xs-6 col-sm-4"><label class="control-label" style="margin-top:20px"><b>Nature du document</b></label></div>
								<div class="col-xs-6 col-sm-8">
								<p:selectOneMenu  value="#{daoController.docNature}" style="width:100%; margin-top:20px;">
							        <f:selectItem  itemLabel="Selectionnez la nature du document..." itemValue=""/>  
								    <f:selectItems value="#{daoController.natureDocListe}" var="v" itemLabel="#{v.nadLibelle}" itemValue="#{v.nadCode}"/> 
								    <p:ajax process="@this" update="@this"></p:ajax>
				       			    </p:selectOneMenu>
								</div>
				</div>
	            <div class="col-md-12">
	              <p:fileUpload fileUploadListener="#{daoController.uploadCharge}" multiple="true"
			                      cancelLabel="Annuler" label="Choisir le(s) document(s)" uploadLabel="Charger le dao" auto="true"
			                      mode="advanced" dragDropSupport="true"
			                          update=":apercuDAOCharge:tabDossierCharge" sizeLimit="50000000" allowTypes="/(\.|\/)(gif|jpe?g|png|mp4|vob|mpeg|avi|mpg|mp3|mkv|flv|m4v|doc?x|doc|mov|pdf|xls?x)$/" />
	            </div>
	            
	            <div class="col-md-12">
		            <div class="box box-success box-solid" >
		              <div class="box-header with-border">
			          <div class="col-md-12 "><div  style="color: #fff"> LISTE DES #{controleController.type}</div></div>
			         </div>
			          <div class="box-body">
			          
                        <p:dataTable id="tabDossierCharge" styleClass="table dt-on-steroids mb0" var="doss" value="#{daoController.dossDacListe}" emptyMessage="Aucun Document enrégistré">
			           <p:column headerText="Nom du document " styleClass="col-md-10">
			            <h:outputText value="#{doss.ddaNom}" />
			        </p:column>
			        <p:column headerText="Nature Document" styleClass="col-md-10">
			            <h:outputText value="#{doss.TNatureDocuments.nadLibelle}"/>
			        </p:column>
			        
			        <p:column headerText="Actions" styleClass="col-md-2">
			        
						<p:commandLink styleClass="btn btn-xs btn-danger" style= "margin-left:5px" action="#{daoController.removeDossier}" title="Supprimer" update="gnl">
		                   <i class="ace-icon fa fa-trash bigger-120"  style="color: white"></i>  
		                   <p:confirm header="Confirmation" message="Etes-vous sur de vouloir supprimer ?" icon="ui-icon-alert" />                              
		                   <f:setPropertyActionListener value="#{doss}" target="#{daoController.selectedDossier}" />
		                </p:commandLink>
		 	        </p:column>
			    </p:dataTable>  
			          </div>
		            </div>
	            </div>
	            
	            
	             <div class="pull-right ">
			            <p:commandLink action="#{daoController.transmettreRespo()}"  styleClass="btn btn-success row pull-right" oncomplete="PF('transDaoChargeDlg').hide()" style="background-color: #036d3b; margin-right:5px;color:#fff" update=":gnl:">
			            <p:confirm header="Confirmation" message="Confirmez vous la trasmission ?" icon="ui-icon-alert" />
			             <i class="ace-icon fa fa-exchange"></i> Transmettre  
			            </p:commandLink>
              </div>
	            
	            
      </p:dialog>
    </h:form>  
    
      
  </h:panelGroup>   
</html>
