<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

      <ui:composition template="/template/templatePage.xhtml">
	<ui:define name="contents">
<h:form id="gnl">	
 <section class="content-header">
      <h3>
      
        <h:panelGroup rendered="#{userController.fonction.TTypeFonction.tyfCod == 'ACR'}">
        #{controleController.libelleDao3} 
        </h:panelGroup>
        
        <h:panelGroup rendered="#{userController.fonction.TTypeFonction.tyfCod == 'CET'}">
        #{controleController.libelleDao3} 
        </h:panelGroup>
        
        <h:panelGroup rendered="#{userController.fonction.TTypeFonction.tyfCod == 'CSV'}">
        #{controleController.libelleDao3} 
        </h:panelGroup>
      
        <h:panelGroup rendered="#{userController.fonction.TTypeFonction.tyfCod == 'DMP'}">
        #{controleController.libelleDao3} 
        </h:panelGroup>
        
        <h:panelGroup rendered="#{userController.fonction.TTypeFonction.tyfCod == 'CPM'}">
        #{controleController.libelleDao1} 
        </h:panelGroup>
        
        <h:panelGroup rendered="#{userController.fonction.TTypeFonction.tyfCod == 'SPP'}">
        #{controleController.libelleDao3} 
        </h:panelGroup>
        <small>
         #{controleController.libelleSmall} 
        
        </small>
      </h3>
      <ol class="breadcrumb">
        <li>
        <p:commandLink action="#{userController.renderPage('accueil')}" update=":content" > 
            <i class="fa fa-dashboard"></i>Accueil
             </p:commandLink>
            </li>
        <li class="active">
         <p:commandLink action="#{ppmController.renderPage('ppm1')}" update=":content" > 
            <i class="fa fa-dashboard"></i> #{controleController.type} | Liste
             </p:commandLink>
        </li>
      </ol>
    </section>
  
    <section class="content">
     <div class="box"></div>
     
        <!-- Inclusion du tableau -->
        <ui:include src="tableauBord.xhtml"  /> 
        <!-- Fin Inclusion du tableau -->
		<h:panelGroup rendered="#{userController.renderMsg}">
				<br/>
				<div class="alert alert-success light alert-dismissable" >
				 <p:commandLink  styleClass="close" data-dismiss="alert" aria-hidden="true" 
				  action="#{userController.initMessage()}"  update=":content">
				<span class="hidden-xs"> x</span>
				</p:commandLink>
				<i class="fa fa-check pr10"></i>
				<strong>Succès!</strong> #{userController.texteMsg}.</div>
				</h:panelGroup>
			
             <div class="row">
            <div class="col-xs-12"><p:messages id="message" showDetail="false" autoUpdate="true"  closable="true"/></div>
            </div>
            
            
           
            <div class="row">
              
        <div class="col-md-12">
        <h:panelGroup rendered="#{controleController.saisie}">
        <h:panelGroup rendered="#{userController.fonction.TTypeFonction.tyfCod == 'ACR'}">
      <div class="box box-success box-solid">
        <div class="box-header with-border">
            <div class="col-md-10 "><div  style="color: #fff">#{controleController.libelle}</div></div>
            <div class="col-md-2 "><div  style="color: #fff">
             <label for="gestion1" class="col-sm-5 control-label">GESTION</label>
	              <div class="col-sm-6">
		                    <p:selectOneMenu id="gestion1" value="#{daoController.gesCode}"
			                         effect="fade" style="width:100%">
					       <f:selectItems value="#{daoController.listeGestion}" var="gs" itemLabel="#{gs.gesCode}" itemValue="#{gs.gesCode}" />				   				    				   
		       		        </p:selectOneMenu>
	               </div>
            </div></div>
         </div>
         <div class="box-body">
          <div class="row">
          
           <div class="col-md-5">
	           <div class="form-group">
		                   <label for="mini3" class="col-sm-2 control-label">Autorité Contractante</label>
		                  <h:panelGroup rendered="#{controleController.love_Ac}" > 
		                  <div class="col-sm-10">
		                   <p:inputTextarea  value="#{userController.fonction.fonLibelle}" rows="2" cols="33" styleClass="form-control" readonly="true"  style="width: 100%" />
		                  </div>
		                  </h:panelGroup>
		                  <h:panelGroup rendered="#{controleController.love_Cpmp}" > 
		                  <div class="col-sm-8">
		                   <p:inputText  type="text" value="#{daoController.recupFonction.fonLibelle}" styleClass="form-control"  readonly="true" style="width: 100%" />
		                  </div>
		                  <div class="col-sm-1">
		                   <p:commandLink  oncomplete="PF('autoriteDlg').show()" action="#{daoController.chargeFonctionCpm()}" styleClass="btn btn-warning"  style="color:#fff;background-color: #f88b2e">
							<i class="fa fa-search-plus"></i>
						  </p:commandLink>
		                  </div>
		                  </h:panelGroup>
		                  <h:panelGroup rendered="#{controleController.love_Dmp}" >
		                  <div class="col-sm-8">
		                   <p:inputText  type="text" value="#{daoController.recupFonction.fonLibelle}" styleClass="form-control"  readonly="true" style="width: 100%" />
		                  </div>
		                  <div class="col-sm-1">
		                   <p:commandLink  oncomplete="PF('DMPDlog').show()" action="#{daoController.chargeFonctionDmp()}" styleClass="btn btn-warning"  style="color:#fff;background-color: #f88b2e">
							<i class="fa fa-search-plus"></i>
						  </p:commandLink>
		                  </div>
		                  </h:panelGroup>
		                </div>
	            </div> 
	            
	            
	            <div class="col-md-7">
	           <div class="form-group">
		                  <label for="mini" class="col-sm-1 control-label">Ministère</label>
		                  <div class="col-sm-11">
		                    <p:inputTextarea  value="#{userController.fonction.TStructure.TMinistere.minLibelle}" rows="2" cols="33" styleClass="form-control" readonly="true"  style="width: 100%" />
		                  </div>
		                </div>
	            </div> 

	      </div>
	        
         </div>
               </div>
               </h:panelGroup>
         </h:panelGroup>
      </div>

				<div class="col-md-12">
					<div class="box box-success box-solid">
						<div class="box-header with-border"> 
						<div class="col-md-5 ">
					   <div style="color: #fff">#{controleController.libelle1}</div>
					 </div>
						<div class="col-md-5 ">	
					  <div class="input-group input-group-sm col-md-12">
					   <span class="input-group-btn">
				                <p:commandLink action="#{daoController.chargeData()}" styleClass="btn btn-warning btn-flat" value="Initialiser" style=" background-color: #f88b2e" update=":gnl"  />
				        </span>
                      <p:inputText styleClass="form-control" type="text" value="#{daoController.multiFiltre}"  placeholder="Effectuer une recherche" ></p:inputText> 
                       <span class="input-group-btn">
                      <p:commandLink action="#{daoController.chercherDac()}" styleClass="btn btn-warning btn-flat" value="Rechercher" style=" background-color: #f88b2e" update=":gnl" />
                    </span>
					 </div>
					 </div>
					 
					 <h:panelGroup rendered="#{userController.fonction.TTypeFonction.tyfCod == 'CSV'}">
					<div class="col-md-2 ">
		                <p:commandLink oncomplete="PF('transDaoAff').show()" rendered="#{controleController.btn_reaffectation}" action="#{daoController.chargeDaoAffectesR()}"  data-toggle="modal"   styleClass="btn btn-warning btn-rounded waves-effect waves-light pull-right"  style="background-color: #f88b2e">
						<span class="btn-label"><i class="fa fa-plus"></i></span><span class="hidden-xs">Réaffectation</span>
				        </p:commandLink>
		          </div>  
					</h:panelGroup> 	
							<div class="col-md-2 ">
							<h:panelGroup rendered="#{controleController.btn_daoPn}" >
								  <p:commandLink styleClass="btn btn-warning btn-rounded waves-effect waves-light pull-right" style=" background-color: #f88b2e" data-original-title="Nouveau DAO" data-toggle="tooltip" rendered="#{controleController.btn_new}" action="#{daoController.renderPage('dao2','ENGDAO')}"  update=":content">
								<span class="btn-label"><i class="fa fa-plus"></i></span><span class="hidden-xs">Nouveau #{controleController.type}</span>
								</p:commandLink>
						  </h:panelGroup>
						  <h:panelGroup rendered="#{controleController.btn_daoPs}" >
								  <p:commandLink styleClass="btn btn-warning btn-rounded waves-effect waves-light pull-right" style=" background-color: #f88b2e" data-original-title="Nouveau DAO" data-toggle="tooltip" rendered="#{controleController.btn_new}" action="#{daoController.renderPage('dao2','ENGDPS')}"  update=":content">
								<span class="btn-label"><i class="fa fa-plus"></i></span><span class="hidden-xs">Nouveau #{controleController.type}</span>
								</p:commandLink>
						  </h:panelGroup>
						  <h:panelGroup rendered="#{controleController.btn_ami}" >
								  <p:commandLink styleClass="btn btn-warning btn-rounded waves-effect waves-light pull-right" style=" background-color: #f88b2e" data-original-title="Nouveau AMI" data-toggle="tooltip" rendered="#{controleController.btn_new}" action="#{daoController.renderPage('dao2','ENGAMI')}"  update=":content">
								<span class="btn-label"><i class="fa fa-plus"></i></span><span class="hidden-xs">Nouveau #{controleController.type}</span>
								</p:commandLink>
						  </h:panelGroup>
						  <h:panelGroup rendered="#{controleController.btn_prq}" >
								  <p:commandLink styleClass="btn btn-warning btn-rounded waves-effect waves-light pull-right" style=" background-color: #f88b2e" data-original-title="Nouveau PRQ" data-toggle="tooltip" rendered="#{controleController.btn_new}" action="#{daoController.renderPage('dao2','ENGPRQ')}"  update=":content">
								<span class="btn-label"><i class="fa fa-plus"></i></span><span class="hidden-xs">Nouveau #{controleController.type}</span>
								</p:commandLink>
						  </h:panelGroup>
							</div>
							
						</div>
						<div class="box-body">
							
					
					<h:panelGroup rendered="#{controleController.panel1}">
					<p:dataTable id="ndTble0" styleClass="table mb0 dt-on-steroids dataTable" var="slctdTb" value="#{daoController.listeDAO}" 
					 emptyMessage="Aucun #{controleController.type}" scrollable="true" scrollHeight="250" >

                        <p:column headerText="N° #{controleController.type}" styleClass="col-sm-1" >
                           <h:panelGroup rendered="#{slctdTb.dacStatutRetour == '1'}">
         				<h:outputText value="#{slctdTb.dacCode}" style="color:red; font-weight:bold " />
         				</h:panelGroup>
                        
                        <h:panelGroup rendered="#{slctdTb.dacStatutRetour != '1'}">
         				<h:outputText value="#{slctdTb.dacCode}" />
         				</h:panelGroup> 
         				
				        </p:column>
				        
				       <p:column headerText="Objet" styleClass="col-sm-4" >
         			   <h:panelGroup rendered="#{slctdTb.dacStatutRetour == '1'}">
         				<h:outputText value="#{slctdTb.dacObjet}" style="color:red; font-weight:bold " />
         				</h:panelGroup>
                        
                        <h:panelGroup rendered="#{slctdTb.dacStatutRetour != '1'}">
         				<h:outputText value="#{slctdTb.dacObjet}" />
         				</h:panelGroup>
				        </p:column>
				       
         				 <p:column headerText="Type Marché" styleClass="col-sm-2" >
         				<h:panelGroup rendered="#{slctdTb.dacStatutRetour == '1'}">
         				<h:outputText value="#{slctdTb.tymLibelleCourt}" style="color:red; font-weight:bold " />
         				</h:panelGroup>
                        
                        <h:panelGroup rendered="#{slctdTb.dacStatutRetour != '1'}">
         				<h:outputText value="#{slctdTb.tymLibelleCourt}" />
         				</h:panelGroup>
				        </p:column> 
				        
				       
         				<p:column headerText="Mode de Passation" styleClass="col-sm-2" >
         				<h:panelGroup rendered="#{slctdTb.dacStatutRetour == '1'}">
         				<h:outputText value="#{slctdTb.mopLibelleLong}" style="color:red; font-weight:bold " />
         				</h:panelGroup>
                        
                        <h:panelGroup rendered="#{slctdTb.dacStatutRetour != '1'}">
         				<h:outputText value="#{slctdTb.mopLibelleLong}" />
         				</h:panelGroup>
				        </p:column> 
				        
				        
				        <p:column headerText="Date reception" styleClass="col-sm-1" rendered="#{userController.fonction.TTypeFonction.tyfCod == 'CPM'}">			
         				<h:panelGroup rendered="#{slctdTb.dacStatutRetour == '1'}">
         				<h:outputText value="#{slctdTb.dacDateValAc}" style="color:red; font-weight:bold " >
         				<f:convertDateTime pattern="dd/MM/yyyy" type="date" />
         				</h:outputText>
         				</h:panelGroup>
                        
                        <h:panelGroup rendered="#{slctdTb.dacStatutRetour != '1'}">
         				<h:outputText value="#{slctdTb.dacDateValAc}" >
         				<f:convertDateTime pattern="dd/MM/yyyy" type="date" />
         				</h:outputText>
         				</h:panelGroup>
				        </p:column> 
				        
				        <p:column headerText="Date de Transmission" styleClass="col-sm-1" rendered="#{userController.fonction.TTypeFonction.tyfCod == 'CSV'}">			
         				<h:panelGroup rendered="#{slctdTb.dacStatutRetour == '1'}">
         				<h:outputText value="#{slctdTb.dacDteValCpmp}" style="color:red; font-weight:bold " >
         				<f:convertDateTime pattern="dd/MM/yyyy" type="date" />
         				</h:outputText>
         				</h:panelGroup>
                        
                        <h:panelGroup rendered="#{slctdTb.dacStatutRetour != '1'}">
         				<h:outputText value="#{slctdTb.dacDteValCpmp}" >
         				<f:convertDateTime pattern="dd/MM/yyyy" type="date" />
         				</h:outputText>
         				</h:panelGroup>
				        </p:column> 
				        
				         <p:column headerText="Mention" styleClass="col-sm-1"  rendered="#{userController.fonction.TTypeFonction.tyfCod != 'ACR'}">
	                    <h:panelGroup rendered="#{slctdTb.dacMention == 'A Valider pour publication'}">
	                         <span class="badge bg-green">#{slctdTb.dacMention}</span>
	                    </h:panelGroup>
	                     <h:panelGroup rendered="#{slctdTb.dacMention != 'A Valider pour publication'}">
	                         <span class="badge bg-yellow">#{slctdTb.dacMention}</span>
	                    </h:panelGroup>
				        </p:column> 


                      <p:column headerText="Actions" styleClass="col-sm-1">
                           
                            <h:panelGroup rendered="#{slctdTb.dacStatutRetour == '1'}">
	                            <p:commandLink  oncomplete="PF('motif').show()" action="#{daoController.chargerObservation}" styleClass="btn btn-xs btn-danger" style="background-color: red;margin-right:3px" update="motif" >
	                              <i class="ace-icon fa fa-envelope bigger-130" style="color: white"></i>
	                             <f:setPropertyActionListener value="#{slctdTb}" target="#{daoController.slctdTd}" />
	                           </p:commandLink> 
	         		         </h:panelGroup>
                           
                             <p:commandLink  action="#{etatsDaoController.renderPage('dao3','APEDAO')}" styleClass="btn btn-xs btn-success"  title="Apercu" style="background-color: #036d3b;margin-right:3px" update=":content">
                                <i class="ace-icon fa fa-search-plus bigger-130"  style="color: white"></i>
                                 <f:setPropertyActionListener value="#{slctdTb}" target="#{etatsDaoController.slctdTd}" />
                             </p:commandLink>
                            
                          <h:panelGroup rendered="#{userController.fonction.TTypeFonction.tyfCod == 'ACR'}">
				            <p:commandLink rendered="#{controleController.saisie}" action="#{daoController.renderPage('dao11','MODDAO')}" class="btn btn-xs btn-warning" style="background-color: #f88b2e;" 
				               title="Modifier" update=":content">
                                <i class="ace-icon fa fa-pencil bigger-120"  style="color: white"></i> 
                                <f:setPropertyActionListener value="#{slctdTb}" target="#{daoController.slctdTd}" />                       
                            </p:commandLink>
                            
                            
                              <p:commandLink rendered="#{controleController.saisie}" action="#{daoController.opendaoType()}" class="btn btn-xs btn-warning" style="background-color: #f88b2e;" 
				               title="Télécharger le DAO type" ajax="false">
                                <i class="ace-icon fa fa-download bigger-120"  style="color: white"></i> 
                                <f:setPropertyActionListener value="#{slctdTb}" target="#{daoController.slctdTd}" />                      
                            </p:commandLink>
                            
                              <p:commandLink rendered="#{controleController.saisie}" action="#{daoController.chargeNatureDocTrans()}" oncomplete="PF('transDaoDlg').show()" styleClass="btn btn-xs btn-primary" style="background-color: #f88b2e; border: #f88b2e; margin-left: 5px" title="transmission" update=":content">
                                <i class="ace-icon fa fa-exchange bigger-130" style="color: white"></i>
                                  <f:setPropertyActionListener value="#{slctdTb}" target="#{daoController.slctdTd}" />
                                </p:commandLink>  
                             </h:panelGroup>
                             
                             
                              <h:panelGroup rendered="#{userController.fonction.TTypeFonction.tyfCod == 'CPM' || userController.fonction.TTypeFonction.tyfCod == 'CSV'}">
                              <h:panelGroup rendered="#{daoController.btnAffecteNormal}">
                               <p:commandLink  oncomplete="PF('diff').show()"  styleClass="btn btn-xs btn-warning" style="background-color: #f88b2e; border: #f88b2e; margin-right: 3px" title="Différer" update=":content">
                                <i class="ace-icon fa fa-mail-reply bigger-130" style="color: white"></i> 
                                <f:setPropertyActionListener value="#{slctdTb}" target="#{daoController.slctdTd}" />
                              </p:commandLink>
                              </h:panelGroup>
                              </h:panelGroup>
                              
                               <h:panelGroup rendered="#{userController.fonction.TTypeFonction.tyfCod == 'CPM'}">
                              <p:commandLink action="#{daoController.transmettreCpmp()}" styleClass="btn btn-xs btn-success"  title="Transmettre" style="background-color: #036d3b;margin-right:3px" update=":content">
                                <i class="ace-icon fa fa-share bigger-130"  style="color: white"></i>
                                 <p:confirm header="Confirmation" message="Confirmez-vous la transmission du DAO N° #{slctdTb.dacCode} ?" icon="ui-icon-alert" />
                                 <f:setPropertyActionListener value="#{slctdTb}" target="#{daoController.slctdTd}" />
                             </p:commandLink>
                              </h:panelGroup>
                              
                              
                              <h:panelGroup rendered="#{userController.fonction.TTypeFonction.tyfCod == 'CSV'}">
                             <h:panelGroup rendered="#{controleController.affDao}">   
                              <h:panelGroup rendered="#{daoController.btnAffecteNormal}">
                             <p:commandLink action="#{daoController.renderPage('dao5','AFFDAO')}" styleClass="btn btn-xs btn-success"  title="Affectation du DAO" style="background-color: #036d3b;margin-right:3px" update=":content">
                                <i class="ace-icon fa fa-share bigger-130"  style="color: white"></i>
                                 <f:setPropertyActionListener value="#{slctdTb}" target="#{daoController.slctdTd}" />
                             </p:commandLink>
                             </h:panelGroup>
                            </h:panelGroup>
                            
                              <h:panelGroup rendered="#{daoController.btnAffecteNormal}"> 
                             <p:commandLink rendered="#{controleController.affDao}" action="#{daoController.finAffectation()}" styleClass="btn btn-xs btn-success"  title="Fin de l'Affectation du DAO" style="background-color: #036d3b;margin-right:3px" update=":content">
                                 <i class="ace-icon fa fa-close bigger-120"  style="color: white"></i>  
                                <p:confirm header="Confirmation" message="Voulez-vous mettre fin à l'affectation du DAO N° #{slctdTb.dacCode} ?" icon="ui-icon-alert" /> 
                                 <f:setPropertyActionListener value="#{slctdTb}" target="#{daoController.slctdTd}" />
                             </p:commandLink>
                             </h:panelGroup>
                             
                             <h:panelGroup rendered="#{daoController.btnAffecte}"> 
                              <p:commandLink oncomplete="PF('chargeEtudeDlg').show()" action="#{daoController.chargeChargeEtudeByDac()}" class="btn btn-xs btn-warning" style="background-color: #f88b2e;margin-right:3px" title="Chargés d'études" update=":dlgChargeEtude">
                                <i class="ace-icon fa fa-users bigger-120"  style="color: white"></i>   
                                <f:setPropertyActionListener value="#{slctdTb}" target="#{daoController.slctdTd}" />                             
                            </p:commandLink>
                            </h:panelGroup>
                            </h:panelGroup>
                            <h:panelGroup rendered="#{userController.fonction.TTypeFonction.tyfCod == 'CSV'}">
                             <p:commandLink rendered="#{controleController.btn_exam}" action="#{daoController.renderPage('dao6','EXADAO')}"  styleClass="btn btn-xs btn-success" style="background-color: #036d3b; border: #036d3b; margin-left: 3px" title="examen" update=":content">
                                <i class="ace-icon fa fa-exchange bigger-130" style="color: white"></i> 
                                   <f:setPropertyActionListener value="#{slctdTb}" target="#{daoController.slctdTd}" /> 
                            </p:commandLink>
                            </h:panelGroup>
                            
                               <p:commandLink rendered="#{controleController.publication}" action="#{daoController.publier()}" styleClass="btn btn-xs btn-success"  title="Publier le DAO" style="background-color: #036d3b;margin-right:3px" update=":content">
                                <i class="ace-icon fa fa-share bigger-130"  style="color: white"></i>
                                 <p:confirm header="Confirmation" message="Confirmez-vous la publication du DAO ?" icon="ui-icon-alert" />
                                 <f:setPropertyActionListener value="#{slctdTb}" target="#{daoController.slctdTd}" />
                             </p:commandLink>
                             
                             <h:panelGroup rendered="#{controleController.vente}">
                               <h:panelGroup rendered="#{controleController.retDao}">   
                             <p:commandLink action="#{daoController.renderPage('dao9','VETDAO')}" styleClass="btn btn-xs btn-success"  title="Vente du DAO" style="background-color: #036d3b;margin-right:3px" update=":content">
                                <i class="ace-icon fa fa-share bigger-130"  style="color: white"></i>
                                 <f:setPropertyActionListener value="#{slctdTb}" target="#{daoController.slctdTd}" />
                             </p:commandLink>
                          </h:panelGroup>
                          
                          <p:commandLink class="btn btn-xs btn-sucess" style="background-color: #036d3b;margin-right:3px"  action="#{daoController.finVente()}"
                                title="Fin de la vente" update=":content">
                              <i class="ace-icon fa fa-close bigger-120"  style="color: white"></i>  
                                <p:confirm header="Confirmation" message="Voulez-vous mettre fin à la vente du DAO N° #{slctdTb.dacCode} ?" icon="ui-icon-alert" /> 
                                <f:setPropertyActionListener value="#{slctdTb}" target="#{daoController.slctdTd}" />                             
                          </p:commandLink>
                          
                          <p:commandLink oncomplete="PF('paiementDlg').show()"  class="btn btn-xs btn-sucess" style="background-color: #036d3b;margin-right:3px"  action="#{daoController.detailVente()}"
                                title="Nombre de Vente" update=":content">
                              <i class="ace-icon fa fa-eye bigger-120"  style="color: white"></i>   
                                <f:setPropertyActionListener value="#{slctdTb}" target="#{daoController.slctdTd}" />                             
                          </p:commandLink>
                          
                          <p:commandLink rendered="false" class="btn btn-xs btn-sucess" style="background-color: #f88b2e;margin-right:3px"  action="#{daoController.finRetrait()}"
                                title="Fin de retrait" update=":content">
                              <i class="ace-icon fa fa-close bigger-120"  style="color: white"></i>  
                                <p:confirm header="Confirmation" message="Voulez-vous mettre fin au retrait du DAO N° #{slctdTb.dacCode} ?" icon="ui-icon-alert" /> 
                                <f:setPropertyActionListener value="#{slctdTb}" target="#{daoController.slctdTd}" />                             
                          </p:commandLink>
                         </h:panelGroup> 
                         
                           <h:panelGroup rendered="#{slctdTb.dacStaCode == 'SBO'}">   
                             <p:commandLink rendered="#{daoController.correction}" action="#{daoController.renderPage('dao10','OBSDAO')}" styleClass="btn btn-xs btn-success"  title="Avis du Bailleur" style="background-color: #036d3b;margin-right:3px" update=":content">
                                <i class="ace-icon fa fa-exchange bigger-130"  style="color: white"></i>
                                 <f:setPropertyActionListener value="#{slctdTb}" target="#{daoController.slctdTd}" />
                             </p:commandLink>
                            </h:panelGroup>
                            
                            <h:panelGroup rendered="#{slctdTb.dacStaCode == 'SRO'}">   
                             <p:commandLink rendered="#{daoController.correction}" action="#{dacModifController.renderPage('dac1','MODDAO')}" styleClass="btn btn-xs btn-success"  title="Prise en compte des observations" style="background-color: #036d3b;margin-right:3px" update=":content">
                                <i class="ace-icon fa fa-exchange bigger-130"  style="color: white"></i>
                                 <f:setPropertyActionListener value="#{slctdTb}" target="#{dacModifController.slctdTd}" />
                             </p:commandLink>
                            </h:panelGroup>  
                            
                               <h:panelGroup rendered="#{userController.fonction.TTypeFonction.tyfCod == 'ACR'}">
                               <p:commandLink action="#{daoController.deleteDac()}" class="btn btn-xs btn-danger" style="margin-left: 3px" title="Supprimer l'opération" update=":content">
                                <i class="ace-icon fa fa-trash bigger-120"  style="color: white"></i>
                                <p:confirm header="Confirmation" message="Confirmez vous la supression du dossier: #{slctdTb.dacObjet}?" icon="ui-icon-alert" />                           
                                 <f:setPropertyActionListener value="#{slctdTb}" target="#{daoController.slctdTd}" />
                               </p:commandLink>  
                              </h:panelGroup> 
                            
				         </p:column>   
				    </p:dataTable>
				   </h:panelGroup> 
				   <h:panelGroup rendered="#{controleController.panel3}">
  <p:dataTable id="chrTble1" styleClass="table mb0 dt-on-steroids dataTable" var="slctdTb" value="#{daoController.daoExamen}"  
					 emptyMessage="Aucun #{controleController.type}" scrollable="true" scrollHeight="250" 
                         paginator="true"
                         rowsPerPageTemplate="5,10,15" >
                        <p:column headerText="N° #{controleController.type}" styleClass="col-sm-1" >                         
         				<h:outputText value="#{slctdTb.dafDacCode}" />
				        </p:column>
				        
				       <p:column headerText="Objet" styleClass="col-sm-4" >
         				<h:outputText value="#{slctdTb.dafDacObjet}" />
				        </p:column>
				        
				       
         				 <p:column headerText="Type Marché" styleClass="col-sm-2" >        				
         				<h:outputText value="#{slctdTb.TTypeMarche.tymLibelleCourt}" />
				        </p:column> 
				        
				       
         				<p:column headerText="Mode de Passation" styleClass="col-sm-2" >        			
         				<h:outputText value="#{slctdTb.TModePassation.mopLibelleLong}" />
				        </p:column> 
				        
				        <p:column headerText="Date Affectation" styleClass="col-sm-2" >        			
         				<h:outputText value="#{slctdTb.dafDteAff}">
         				<f:convertDateTime pattern="dd/MM/yyyy" type="date" />
         				</h:outputText>
				        </p:column> 
				        
				        <p:column headerText="Date Transmission" styleClass="col-sm-2" >        			
         				<h:outputText value="#{slctdTb.dafDteValCpmp}">
         				<f:convertDateTime pattern="dd/MM/yyyy" type="date" />
         				</h:outputText>
				        </p:column> 
				        
				         <p:column headerText="Mention" styleClass="col-sm-1" >
	                    <h:panelGroup rendered="#{slctdTb.dafMention == 'A Valider pour publication'}">
	                         <span class="badge bg-green">#{slctdTb.dafMention}</span>
	                    </h:panelGroup>
	                     <h:panelGroup rendered="#{slctdTb.dafMention != 'A Valider pour publication'}">
	                         <span class="badge bg-yellow">#{slctdTb.dafMention}</span>
	                    </h:panelGroup>
				        </p:column> 
				       
                      <p:column headerText="Actions" styleClass="col-sm-1">
                      
                             <p:commandLink  action="#{etatsDaoController.renderPage('dao8','APEDAO')}" styleClass="btn btn-xs btn-success"  title="Apercu" style="background-color: #036d3b;margin-right:3px" update=":content">
                                <i class="ace-icon fa fa-search-plus bigger-130"  style="color: white"></i>
                                 <f:setPropertyActionListener value="#{slctdTb}" target="#{etatsDaoController.slctdTda}" />
                             </p:commandLink>
                      
                        
                            <h:panelGroup rendered="#{slctdTb.dafStaCode != 'DC2'}">
                            <p:commandLink action="#{daoController.renderPage('dao6','EXADAO')}"  styleClass="btn btn-xs btn-success" style="background-color: #036d3b; border: #036d3b; margin-left: 3px" title="examen" update=":content">
                                <i class="ace-icon fa fa-exchange bigger-130" style="color: white"></i> 
                                   <f:setPropertyActionListener value="#{slctdTb}" target="#{daoController.slctdTda}" /> 
                            </p:commandLink> 
                            </h:panelGroup>
                            
                            <h:panelGroup rendered="#{slctdTb.dafStaCode == 'DC2'}">
                           <p:commandLink action="#{daoController.chargeNatureDocTrans()}" oncomplete="PF('transDaoChargeDlg').show()" styleClass="btn btn-xs btn-primary" style="background-color: #f88b2e; border: #f88b2e; margin-left: 5px" title="transmission" update=":content">
                                <i class="ace-icon fa fa-exchange bigger-130" style="color: white"></i>
                                  <f:setPropertyActionListener value="#{slctdTb}" target="#{daoController.slctdTda}" />
                           </p:commandLink> 
                           </h:panelGroup>
                           
                           <h:panelGroup rendered="#{daoController.btnAffecte1}"> 
                              <p:commandLink oncomplete="PF('chargeEtudeDlg').show()" action="#{daoController.chargeChargeEtudeByDac1()}" class="btn btn-xs btn-warning" style="background-color: #f88b2e; margin-left:3px" title="Chargés d'études" update=":dlgChargeEtude">
                                <i class="ace-icon fa fa-users bigger-120"  style="color: white"></i>   
                                <f:setPropertyActionListener value="#{slctdTb}" target="#{daoController.slctdTda}" />                             
                            </p:commandLink>
                            </h:panelGroup>
                        
				         </p:column>   
    </p:dataTable>
    </h:panelGroup>
    
    <h:panelGroup rendered="#{controleController.panel4}">
					<p:dataTable id="ndTblepub0" styleClass="table mb0 dt-on-steroids dataTable" var="slctdTb" value="#{daoController.publicationListe}" 
					 rowKey="#{slctdTb.dacCode}" selection="#{daoController.publicationSelection}" emptyMessage="Aucun #{controleController.type}" 
					 scrollable="true" scrollHeight="250" >
					 
					 <p:column selectionMode="multiple" style="width:40px;text-align:center"/>

                        <p:column headerText="N° #{controleController.type}" width="9%" >
                           <h:panelGroup rendered="#{slctdTb.dacStatutRetour == '1'}">
         				<h:outputText value="#{slctdTb.dacCode}" style="color:red; font-weight:bold " />
         				</h:panelGroup>
                        
                        <h:panelGroup rendered="#{slctdTb.dacStatutRetour != '1'}">
         				<h:outputText value="#{slctdTb.dacCode}" />
         				</h:panelGroup> 
         				
				        </p:column>
				        
				       <p:column headerText="Objet" styleClass="col-sm-4" >
         			   <h:panelGroup rendered="#{slctdTb.dacStatutRetour == '1'}">
         				<h:outputText value="#{slctdTb.dacObjet}" style="color:red; font-weight:bold " />
         				</h:panelGroup>
                        
                        <h:panelGroup rendered="#{slctdTb.dacStatutRetour != '1'}">
         				<h:outputText value="#{slctdTb.dacObjet}" />
         				</h:panelGroup>
				        </p:column>
				       
         				 <p:column headerText="Type Marché" width="8%" >
         				<h:panelGroup rendered="#{slctdTb.dacStatutRetour == '1'}">
         				<h:outputText value="#{slctdTb.tymLibelleCourt}" style="color:red; font-weight:bold " />
         				</h:panelGroup>
                        
                        <h:panelGroup rendered="#{slctdTb.dacStatutRetour != '1'}">
         				<h:outputText value="#{slctdTb.tymLibelleCourt}" />
         				</h:panelGroup>
				        </p:column> 
				        
				       
         				<p:column headerText="Mode de Passation" width="11%" >
         				<h:panelGroup rendered="#{slctdTb.dacStatutRetour == '1'}">
         				<h:outputText value="#{slctdTb.mopLibelleLong}" style="color:red; font-weight:bold " />
         				</h:panelGroup>
                        
                        <h:panelGroup rendered="#{slctdTb.dacStatutRetour != '1'}">
         				<h:outputText value="#{slctdTb.mopLibelleLong}" />
         				</h:panelGroup>
				        </p:column> 
				        
				        
				        <p:column headerText="Date reception" styleClass="col-sm-1" rendered="#{userController.fonction.TTypeFonction.tyfCod == 'CPM'}">			
         				<h:panelGroup rendered="#{slctdTb.dacStatutRetour == '1'}">
         				<h:outputText value="#{slctdTb.dacDateValAc}" style="color:red; font-weight:bold " >
         				<f:convertDateTime pattern="dd/MM/yyyy" type="date" />
         				</h:outputText>
         				</h:panelGroup>
                        
                        <h:panelGroup rendered="#{slctdTb.dacStatutRetour != '1'}">
         				<h:outputText value="#{slctdTb.dacDateValAc}" >
         				<f:convertDateTime pattern="dd/MM/yyyy" type="date" />
         				</h:outputText>
         				</h:panelGroup>
				        </p:column> 
				        
				         <p:column headerText="Mention" width="10%"  rendered="#{userController.fonction.TTypeFonction.tyfCod != 'ACR'}">
	                    <h:panelGroup rendered="#{slctdTb.dacMention == 'A Valider pour publication'}">
	                         <span class="badge bg-green">#{slctdTb.dacMention}</span>
	                    </h:panelGroup>
	                     <h:panelGroup rendered="#{slctdTb.dacMention != 'A Valider pour publication'}">
	                         <span class="badge bg-yellow">#{slctdTb.dacMention}</span>
	                    </h:panelGroup>
				        </p:column> 
				       
				        

                      <p:column headerText="Actions" width="5%">
                           
                             <p:commandLink  action="#{etatsDaoController.renderPage('dao3','APEDAO')}" styleClass="btn btn-xs btn-success"  title="Apercu" style="background-color: #036d3b;margin-right:3px" update=":content">
                                <i class="ace-icon fa fa-search-plus bigger-130"  style="color: white"></i>
                                 <f:setPropertyActionListener value="#{slctdTb}" target="#{etatsDaoController.slctdTd}" />
                             </p:commandLink>
                            
                              <p:commandLink rendered="#{controleController.publication}" action="#{daoController.publier()}" styleClass="btn btn-xs btn-success"  title="Publier le DAO" style="background-color: #036d3b;margin-right:3px" update=":content">
                                <i class="ace-icon fa fa-share bigger-130"  style="color: white"></i>
                                 <p:confirm header="Confirmation" message="Confirmez-vous la publication du DAO ?" icon="ui-icon-alert" />
                                 <f:setPropertyActionListener value="#{slctdTb}" target="#{daoController.slctdTd}" />
                             </p:commandLink>
				         </p:column>   
				    </p:dataTable>
				   </h:panelGroup> 
							
						 </div>
					</div> 
				</div>

            </div>
             
    
 <p:commandLink styleClass="btn btn-warning mr10 " style=" background-color: #f88b2e" action="#{userController.renderPage('accueil')}"   update=":content">
		       <i class="ace-icon fa fa-close bigger-130"></i> Fermer
		     </p:commandLink>
		                  
     
                   
       </section>
         

</h:form>

 <!-- Inclusion de la loveIndex -->
         <ui:include src="loveIndex.xhtml"  />  
        <!-- Fin Inclusion de loveIndex.xhtml -->

<p:confirmDialog global="true" showEffect="fade" hideEffect="fade"  width="30%" height="25%" >
 		<div align="center">
        <p:commandButton value="Confirmer" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
        <p:commandButton value="Annuler" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
        </div>
    </p:confirmDialog>
    </ui:define>
</ui:composition>
</html>