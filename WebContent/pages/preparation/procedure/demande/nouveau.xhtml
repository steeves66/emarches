<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
     <link rel="stylesheet" href="../resources/assets/css/ace.min.css"/>
<ui:composition template="/template/templatePage.xhtml">

	
	<ui:define name="contents">
	<h:form id="gnl" styleClass="form-horizontal">
<section class="content-header">
      <h3>
       #{controleController.libelle} 
        <!-- <small>Nouveau AGPM </small> -->
      </h3>
      <ol class="breadcrumb">
      <li>
        <p:commandLink action="#{userController.renderPage('accueil')}" update=":content" > 
            <i class="fa fa-dashboard"></i>Accueil
             </p:commandLink>
            </li>
        <li>
        <p:commandLink action="#{ppmController.renderPage('pgpmAc1')}" update=":content" > 
            <i class="fa fa-dashboard"></i>Prcédures dérogatoire | Index
             </p:commandLink>
            </li>
        <li class="active">
         <p:commandLink action="#{agpmController.renderPage('agpm2')}" update=":content" > 
            <i class="fa fa-dashboard"></i>DEMANDE | SAISIE 
           <!--  #{controleController.libelle1}  -->
             </p:commandLink>
        </li>
      </ol>
    </section>
    
    <section class="content">
     <div class="box"></div>
    <h:panelGroup rendered="#{userController.renderMsg}">
				<br/>
				<div class="alert alert-success light alert-dismissable" >
				 <p:commandLink  styleClass="close" data-dismiss="alert" aria-hidden="true" 
				  action="#{userController.initMessage()}"  update=":content">
				<span class="hidden-xs"> x</span>
				</p:commandLink>
				<i class="fa fa-check pr10"></i>
				<strong>Succès!</strong> #{userController.texteMsg}.</div>
				</h:panelGroup>
     
     <p:messages id="message" showDetail="false" autoUpdate="true"  closable="true"/>
     
      <div class="row">
       
	 <div class="col-md-12">
       
        
        <!-- /.box-header -->
        <p:wizard flowListener="#{demandeController.onFlowProcess}"  nextLabel="Suivant" backLabel="Précédent" >
	      <p:tab id="demande" title="Informations sur la démande" titleStyle="background-color: #f88b2e;background-image: none">
	      
	        <div class="box box-success box-solid">
              <div class="box-header with-border">
               <div class="col-md-12 "><div  style="color: #fff">INFORMATIONS DE LA DEMANDE</div></div>
             </div>
             
             <div class="box-body">
              
	                 <div class="col-md-6">
	                 
	                 
	             <div class="form-group">
                  <label  class="col-sm-3 control-label">Type de la demande</label>
                  
                  <div class="col-sm-9">
                    <p:selectOneMenu id="tami" required="true" requiredMessage="Veuillez choisir le type de la demande" value="#{demandeController.tdmCode}" effect="fade" style="width:100%" filter="true" filterMatchMode="startsWith">
			      <f:selectItem  itemLabel="Choisir le type de la demande.." itemValue="empty" />  
			       <f:selectItems value="#{demandeController.listeTypeDemandes}" var="dem" itemLabel="#{dem.tdmLibelle}" itemValue="#{dem.tdmCode}" />	
			       <p:ajax listener="#{demandeController.chargeListBytype()}" update="gnl:panelDetail" /> 		   				   
				<f:selectItems />				   				    				   
		       	</p:selectOneMenu>
                  </div>
                 
             
                  
                </div> 

               <div class="form-group">
                  <label for="relalisation" class="col-sm-3 control-label">Objet de la démande<span style="color:red;"> *</span></label>
                  <div class="col-sm-9">
                    <p:inputTextarea value="#{demandeController.newDem.demObjet}" rows="2" cols="33" styleClass="form-control" id="relalisation" style="width: 100%" />
                  </div>
              </div>
               
                
                
	        </div>
	        
	       <div class="col-md-6">
	       
	        <div class="form-group">
                  <label class="col-sm-3 control-label">Motif de la démande<span style="color:red;"> *</span></label>
                  <div class="col-sm-9">
                    <p:inputTextarea value="#{demandeController.newDem.demMotif}" rows="2" cols="33" styleClass="form-control"  style="width: 100%" />
                  </div>
              </div>
              <div class="form-group">
		     <label for="trdao" class="col-sm-3 control-label">Date de la demande<span style="color:red;"> *</span></label>
		     <div class="col-sm-3">
		       <p:calendar id="trdao" mask="true" locale="fr" pattern="dd/MM/yyyy" style="width: 100%" >
		       </p:calendar> 
		   </div>
		   
		    <label for="ref" class="col-sm-3 control-label">Référence</label>
		     <div class="col-sm-3">
		        <p:inputText value="#{demandeController.newDem.demRef}" type="text" styleClass="form-control" style="width: 100%" />
		   </div>

		   </div>        
	       </div>
               
               </div>
	      </div>
	      <h:panelGroup id="panelDetail">
		<h:panelGroup rendered="#{demandeController.panelRestreint}">
		  <div class="box box-success box-solid">
              <div class="box-header with-border">
               <div class="col-md-12 "><div  style="color: #fff">CHOISIR LE(S) DAO OU LE(S) PPM POUR CREER VOTRE DEMANDE</div></div>
             </div>
             
              <div class="row">                   
		            <div class="col-md-12">
		                
		          <div class="col-md-6"> 
		          <div class="form-group">
                  <label for="objet" class="col-sm-3 control-label"></label>
                  <div class="col-sm-9"> 
                    <p:selectOneRadio value="#{demandeController.daoPpm}" id="daoPpm">
                    <p:ajax  listener="#{demandeController.choixDaoPpm()}" global="false" update="gnl:restreint"></p:ajax>
			            <f:selectItem itemLabel="DAO" itemValue="dao" />
			            <f:selectItem itemLabel="PPM" itemValue="ppm" />
			        </p:selectOneRadio>
			        </div>
                  </div>   
		            </div>   
		                
		             <div class="col-md-6">  
		            </div>   
		                
		         </div>
            </div>
             
             <h:panelGroup id="restreint">
             <h:panelGroup rendered="#{demandeController.panelDao}">
             <div class="box-body">
              <div class="row">                   
		            <div class="col-md-12">
		                <div class="input-group input-group-sm col-md-4">
				                <span class="input-group-btn">
				                <p:commandLink action="#{commissionController.chargeOffre()}" styleClass="btn btn-warning btn-flat" value="Initialiser" style=" background-color: #f88b2e"  />
				                </span>
			                      <p:inputText value="#{commissionController.dofNum}" styleClass="form-control" type="text"  placeholder="Effectuer une recherche"></p:inputText> 
			                       <span class="input-group-btn">
			                      <p:commandLink action="#{commissionController.chargeOffreFilterOffre()}" styleClass="btn btn-success btn-flat" value="Rechercher" style=" background-color: #036d3b"  />
			                    </span>
						  </div> 
		                 </div>
                      </div>    
										
											<p:dataTable id="TbDao"
												styleClass="table mb0 dt-on-steroids dataTable"
												var="slctdTb" value="#{demandeController.listeDao}"
												rowKey="#{slctdTb.dacCode}" selection="#{demandeController.selectionligneDao}" editMode="cell" scrollable="true" scrollHeight="270"
												emptyMessage="Aucun DAO Trouvé">
												 <p:column selectionMode="multiple" style="width:40px;text-align:center"/>

												<p:column headerText="N°DAO" styleClass="col-sm-2">
													<h:outputText value="#{slctdTb.dacCode}" />
												</p:column>
													<p:column headerText="Objet" styleClass="col-sm-5">
													<h:outputText value="#{slctdTb.dacObjet}" />
												</p:column>
													<p:column headerText="Type Marché" styleClass="col-sm-3">
													<h:outputText value="#{slctdTb.tymLibelleCourt}" />
												</p:column>
													<p:column headerText="Mode de Passation" styleClass="col-sm-2">
													<h:outputText value="#{slctdTb.mopLibelleCourt}" />
												</p:column>
													
											</p:dataTable>
						</div>	
			</h:panelGroup>
			
			
			
			<h:panelGroup rendered="#{demandeController.panelPpm}">			
			<div class="box-body">
               
               <div class="row">                   
		            <div class="col-md-12">
		                <div class="input-group input-group-sm col-md-4">
				                <span class="input-group-btn">
				                <p:commandLink action="#{daoController.chargeRecherchePPM()}" styleClass="btn btn-warning btn-flat" value="Initialiser" style=" background-color: #f88b2e"  />
				                </span>
			                      <p:inputText value="#{commissionController.dofNum}" styleClass="form-control" type="text"  placeholder="Effectuer une recherche"></p:inputText> 
			                       <span class="input-group-btn">
			                      <p:commandLink action="#{commissionController.chargeOffreFilterOffre()}" styleClass="btn btn-success btn-flat" value="Rechercher" style=" background-color: #036d3b"  />
			                    </span>
						  </div> 
		                 </div>
                      </div>    
                 
               <p:dataTable id="tblnat1" styleClass="table mb0 dt-on-steroids dataTable" var="slctdTb" value="#{demandeController.listePPM}" 
					rowKey="#{slctdTb.dppId}" selection="#{demandeController.selectionlignePPM}" 
				scrollable="true" scrollHeight="270" emptyMessage="Aucun PPM enregistré" rows="5">
                         
                         <p:column selectionMode="multiple" style="width:40px;text-align:center"/>
                         
                         <p:column headerText="Objet de l'Opération" styleClass="col-sm-3" >
         				<h:outputText value="#{slctdTb.dppObjet}" />
				        </p:column>

                     
				       <p:column headerText="Ligne Budgétaire" styleClass="col-sm-2" >
         				<h:outputText value="#{slctdTb.lbgImputation}" />
				        </p:column>
				        <p:column headerText="Type Marché" styleClass="col-sm-3" >
         				<h:outputText value="#{slctdTb.tymLibelleCourt}" />
				        </p:column>
				       
         				 <p:column headerText="Structure Conductrice" styleClass="col-sm-4" >
         				<h:outputText value="#{slctdTb.dppStructureConduc}" />
				        </p:column> 
         				<p:column headerText="Structure Bénéficiare" styleClass="col-sm-3" >
         				<h:outputText value="#{slctdTb.dppStructureBenefi}" />
				        </p:column> 
				        
				       
                    </p:dataTable>
                    
                   <div>
                   </div>
              </div>
             </h:panelGroup>
             </h:panelGroup>
             
             </div>
             
            </h:panelGroup> 
             
             
            <h:panelGroup rendered="#{demandeController.panelGreAgre}">
             <div class="box box-success box-solid">
               <div class="box-header with-border">
                <div class="col-md-12 ">
                   <div  style="color: #fff">CHOISIR LE(S) PPM POUR CREER VOTRE DEMANDE</div>
                 </div>
                </div>
               <div class="box-body">
               
               <div class="row">                   
		            <div class="col-md-12">
		                <div class="input-group input-group-sm col-md-4">
				                <span class="input-group-btn">
				                <p:commandLink action="#{daoController.chargeRecherchePPM()}" styleClass="btn btn-warning btn-flat" value="Initialiser" style=" background-color: #f88b2e"  />
				                </span>
			                      <p:inputText value="#{commissionController.dofNum}" styleClass="form-control" type="text"  placeholder="Effectuer une recherche"></p:inputText> 
			                       <span class="input-group-btn">
			                      <p:commandLink action="#{commissionController.chargeOffreFilterOffre()}" styleClass="btn btn-success btn-flat" value="Rechercher" style=" background-color: #036d3b"  />
			                    </span>
						  </div> 
		                 </div>
                      </div>    
                 
               <p:dataTable id="tblnat" styleClass="table mb0 dt-on-steroids dataTable" var="slctdTb" value="#{demandeController.listePPM}" 
					rowKey="#{slctdTb.dppId}" selection="#{demandeController.selectionlignePPM}" 
				scrollable="true" scrollHeight="270" emptyMessage="Aucun PPM enregistré" rows="5">
                         
                         <p:column selectionMode="multiple" style="width:40px;text-align:center"/>
                         
                         <p:column headerText="Objet de l'Opération" styleClass="col-sm-3" >
         				<h:outputText value="#{slctdTb.dppObjet}" />
				        </p:column>

                     
				       <p:column headerText="Ligne Budgétaire" styleClass="col-sm-2" >
         				<h:outputText value="#{slctdTb.lbgImputation}" />
				        </p:column>
				        <p:column headerText="Type Marché" styleClass="col-sm-3" >
         				<h:outputText value="#{slctdTb.tymLibelleCourt}" />
				        </p:column>
				       
         				 <p:column headerText="Structure Conductrice" styleClass="col-sm-4" >
         				<h:outputText value="#{slctdTb.dppStructureConduc}" />
				        </p:column> 
         				<p:column headerText="Structure Bénéficiare" styleClass="col-sm-3" >
         				<h:outputText value="#{slctdTb.dppStructureBenefi}" />
				        </p:column> 
				        
				       
                    </p:dataTable>
                    
                   <div>
                   
                   </div>
	 
              </div>
             </div>
            </h:panelGroup>
            
             
             <h:panelGroup rendered="#{demandeController.panelLigneBudgetaire}">
             <div class="box box-success box-solid">
               <div class="box-header with-border">
                <div class="col-md-12 ">
                   <div  style="color: #fff">CHOISIR LE(S) LIGNE BUDGETAIRE(S) POUR CREER VOTRE DEMANDE</div>
                 </div>
                </div>
               <div class="box-body">
               
               <div class="row">                   
		            <div class="col-md-12">
		                <div class="input-group input-group-sm col-md-4">
				                <span class="input-group-btn">
				                <p:commandLink action="#{daoController.chargeRecherchePPM()}" styleClass="btn btn-warning btn-flat" value="Initialiser" style=" background-color: #f88b2e"  />
				                </span>
			                      <p:inputText value="#{commissionController.dofNum}" styleClass="form-control" type="text"  placeholder="Effectuer une recherche"></p:inputText> 
			                       <span class="input-group-btn">
			                      <p:commandLink action="#{commissionController.chargeOffreFilterOffre()}" styleClass="btn btn-success btn-flat" value="Rechercher" style=" background-color: #036d3b"  />
			                    </span>
						  </div> 
		                 </div>
                      </div>    
                 
               <p:dataTable id="tbligne" styleClass="table mb0 dt-on-steroids dataTable" var="slctdTb" value="#{demandeController.listeLigneBugetaire}" 
					rowKey="#{slctdTb.lbgCode}" selection="#{demandeController.selectionligneBugetaire}" 
				scrollable="true" scrollHeight="270" emptyMessage="Aucune ligne budgétaire trouvée" rows="5">
                         
                         <p:column selectionMode="multiple" style="width:40px;text-align:center"/>
                         
                         <p:column headerText="Code" styleClass="col-sm-1" >
         				<h:outputText value="#{slctdTb.lbgCode}" />
				        </p:column>

				       <p:column headerText="Ligne Budgétaire" styleClass="col-sm-2" >
         				<h:outputText value="#{slctdTb.lbgImputation}" />
				        </p:column>
				        <p:column headerText="Trésor" styleClass="col-sm-1" >
         				<h:outputText value="#{slctdTb.lbgAeTr}">
         				<f:convertNumber pattern="##,###.##"></f:convertNumber>
         				</h:outputText>
				        </p:column>
				       
         				 <p:column headerText="Emprunt" styleClass="col-sm-2" >
         				<h:outputText value="#{slctdTb.lbgAeEmp}">
         				<f:convertNumber pattern="##,###.##"></f:convertNumber>
         				</h:outputText>
				        </p:column> 
         				<p:column headerText="Don" styleClass="col-sm-2" >
         				<h:outputText value="#{slctdTb.lbgAeDon}">
         				<f:convertNumber pattern="##,###.##"></f:convertNumber>
         				</h:outputText>
				        </p:column>
				        <p:column headerText="Disponible" styleClass="col-sm-2" >
         				<h:outputText value="#{slctdTb.lbgDisTot}">
         				<f:convertNumber pattern="##,###.##"></f:convertNumber>
         				</h:outputText>
				        </p:column> 
				         <p:column headerText="Total" styleClass="col-sm-2" >
         				<h:outputText value="#{slctdTb.lbgTotDot}">
         				<f:convertNumber pattern="##,###.##"></f:convertNumber>
         				</h:outputText>
				        </p:column> 

                    </p:dataTable>
                    
                   <div>
                   
                   </div>
	 
              </div>
             </div>
               
           </h:panelGroup>
           
           <h:panelGroup rendered="#{demandeController.panelAvenant}">
             <div class="box box-success box-solid">
               <div class="box-header with-border">
                <div class="col-md-12 ">
                   <div  style="color: #fff">CHOISIR LE(S) MARCHE(S) POUR CREER VOTRE DEMANDE</div>
                 </div>
                </div>
               <div class="box-body">
               
               <div class="row">                   
		            <div class="col-md-12">
		                <div class="input-group input-group-sm col-md-4">
				                <span class="input-group-btn">
				                <p:commandLink action="#{daoController.chargeRecherchePPM()}" styleClass="btn btn-warning btn-flat" value="Initialiser" style=" background-color: #f88b2e"  />
				                </span>
			                      <p:inputText value="#{commissionController.dofNum}" styleClass="form-control" type="text"  placeholder="Effectuer une recherche"></p:inputText> 
			                       <span class="input-group-btn">
			                      <p:commandLink action="#{commissionController.chargeOffreFilterOffre()}" styleClass="btn btn-success btn-flat" value="Rechercher" style=" background-color: #036d3b"  />
			                    </span>
						  </div> 
		                 </div>
                      </div>    
                 
               <p:dataTable id="tbleMarche" styleClass="table mb0 dt-on-steroids dataTable" var="slctdTb" 
					
				scrollable="true" scrollHeight="270" emptyMessage="Aucune marché trouvé" rows="5">
                         
                         <p:column selectionMode="multiple" style="width:40px;text-align:center"/>
                         
                         <p:column headerText="Code" styleClass="col-sm-1" >
         				<h:outputText />
				        </p:column>

				       <p:column headerText="Marché" styleClass="col-sm-2" >
         				<h:outputText  />
				        </p:column>
				        <p:column headerText="Type Marché" styleClass="col-sm-1" >
         				<h:outputText>
         				<f:convertNumber pattern="##,###.##"></f:convertNumber>
         				</h:outputText>
				        </p:column>
				       
         				 <p:column headerText="Emprunt" styleClass="col-sm-2" >
         				<h:outputText value="#{slctdTb.lbgAeEmp}">
         				<f:convertNumber pattern="##,###.##"></f:convertNumber>
         				</h:outputText>
				        </p:column> 
         				<p:column headerText="Don" styleClass="col-sm-2" >
         				<h:outputText >
         				<f:convertNumber pattern="##,###.##"></f:convertNumber>
         				</h:outputText>
				        </p:column>
				        <p:column headerText="Disponible" styleClass="col-sm-2" >
         				<h:outputText>
         				<f:convertNumber pattern="##,###.##"></f:convertNumber>
         				</h:outputText>
				        </p:column> 
				         <p:column headerText="Total" styleClass="col-sm-2" >
         				<h:outputText>
         				<f:convertNumber pattern="##,###.##"></f:convertNumber>
         				</h:outputText>
				        </p:column> 

                    </p:dataTable>
                    
                   <div>
                   
                   </div>
	 
              </div>
             </div>
               
           </h:panelGroup>
           
            <h:panelGroup rendered="#{demandeController.panelClarification}">
             <div class="box box-success box-solid">
               <div class="box-header with-border">
                <div class="col-md-12 ">
                   <div  style="color: #fff">CHOISIR LE(S) AVIS(S) D'APPEL D'OFFRE(S) POUR CREER VOTRE DEMANDE</div>
                 </div>
                </div>
               <div class="box-body">
               
               <div class="row">                   
		            <div class="col-md-12">
		                <div class="input-group input-group-sm col-md-4">
				                <span class="input-group-btn">
				                <p:commandLink action="#{daoController.chargeRecherchePPM()}" styleClass="btn btn-warning btn-flat" value="Initialiser" style=" background-color: #f88b2e"  />
				                </span>
			                      <p:inputText value="#{commissionController.dofNum}" styleClass="form-control" type="text"  placeholder="Effectuer une recherche"></p:inputText> 
			                       <span class="input-group-btn">
			                      <p:commandLink action="#{commissionController.chargeOffreFilterOffre()}" styleClass="btn btn-success btn-flat" value="Rechercher" style=" background-color: #036d3b"  />
			                    </span>
						  </div> 
		                 </div>
                      </div>    
                 
               <p:dataTable id="tblClarification" styleClass="table mb0 dt-on-steroids dataTable" var="slctdTb" 
					
				scrollable="true" scrollHeight="270" emptyMessage="Aucune marché trouvé" rows="5">
                         
                         <p:column selectionMode="multiple" style="width:40px;text-align:center"/>
                         
                         <p:column headerText="Code" styleClass="col-sm-1" >
         				<h:outputText />
				        </p:column>

				       <p:column headerText="Marché" styleClass="col-sm-2" >
         				<h:outputText  />
				        </p:column>
				        <p:column headerText="Type Marché" styleClass="col-sm-1" >
         				<h:outputText>
         				<f:convertNumber pattern="##,###.##"></f:convertNumber>
         				</h:outputText>
				        </p:column>
				       
         				 <p:column headerText="Emprunt" styleClass="col-sm-2" >
         				<h:outputText value="#{slctdTb.lbgAeEmp}">
         				<f:convertNumber pattern="##,###.##"></f:convertNumber>
         				</h:outputText>
				        </p:column> 
         				<p:column headerText="Don" styleClass="col-sm-2" >
         				<h:outputText >
         				<f:convertNumber pattern="##,###.##"></f:convertNumber>
         				</h:outputText>
				        </p:column>
				        <p:column headerText="Disponible" styleClass="col-sm-2" >
         				<h:outputText>
         				<f:convertNumber pattern="##,###.##"></f:convertNumber>
         				</h:outputText>
				        </p:column> 
				         <p:column headerText="Total" styleClass="col-sm-2" >
         				<h:outputText>
         				<f:convertNumber pattern="##,###.##"></f:convertNumber>
         				</h:outputText>
				        </p:column> 

                    </p:dataTable>
                    
                   <div>
                   
                   </div>
	 
              </div>
             </div>
               
           </h:panelGroup>
           
            <h:panelGroup rendered="#{demandeController.panelEclaissisement}">
             <div class="box box-success box-solid">
               <div class="box-header with-border">
                <div class="col-md-12 ">
                   <div  style="color: #fff">CHOISIR LE(S) OFFRE(S) POUR CREER VOTRE DEMANDE</div>
                 </div>
                </div>
               <div class="box-body">
               
               <div class="row">                   
		            <div class="col-md-12">
		                <div class="input-group input-group-sm col-md-4">
				                <span class="input-group-btn">
				                <p:commandLink action="#{daoController.chargeRecherchePPM()}" styleClass="btn btn-warning btn-flat" value="Initialiser" style=" background-color: #f88b2e"  />
				                </span>
			                      <p:inputText value="#{commissionController.dofNum}" styleClass="form-control" type="text"  placeholder="Effectuer une recherche"></p:inputText> 
			                       <span class="input-group-btn">
			                      <p:commandLink action="#{commissionController.chargeOffreFilterOffre()}" styleClass="btn btn-success btn-flat" value="Rechercher" style=" background-color: #036d3b"  />
			                    </span>
						  </div> 
		                 </div>
                      </div>    
                 
               <p:dataTable id="tblApelOffre" styleClass="table mb0 dt-on-steroids dataTable" var="slctdTb" 
					
				scrollable="true" scrollHeight="270" emptyMessage="Aucune marché trouvé" rows="5">
                         
                         <p:column selectionMode="multiple" style="width:40px;text-align:center"/>
                         
                         <p:column headerText="Code" styleClass="col-sm-1" >
         				<h:outputText />
				        </p:column>

				       <p:column headerText="Marché" styleClass="col-sm-2" >
         				<h:outputText  />
				        </p:column>
				        <p:column headerText="Type Marché" styleClass="col-sm-1" >
         				<h:outputText>
         				<f:convertNumber pattern="##,###.##"></f:convertNumber>
         				</h:outputText>
				        </p:column>
				       
         				 <p:column headerText="Emprunt" styleClass="col-sm-2" >
         				<h:outputText value="#{slctdTb.lbgAeEmp}">
         				<f:convertNumber pattern="##,###.##"></f:convertNumber>
         				</h:outputText>
				        </p:column> 
         				<p:column headerText="Don" styleClass="col-sm-2" >
         				<h:outputText >
         				<f:convertNumber pattern="##,###.##"></f:convertNumber>
         				</h:outputText>
				        </p:column>
				        <p:column headerText="Disponible" styleClass="col-sm-2" >
         				<h:outputText>
         				<f:convertNumber pattern="##,###.##"></f:convertNumber>
         				</h:outputText>
				        </p:column> 
				         <p:column headerText="Total" styleClass="col-sm-2" >
         				<h:outputText>
         				<f:convertNumber pattern="##,###.##"></f:convertNumber>
         				</h:outputText>
				        </p:column> 

                    </p:dataTable>
                    
                   <div>
                   
                   </div>
	 
              </div>
             </div>
               
           </h:panelGroup>
          
          </h:panelGroup>
		</p:tab>
			        
		<p:tab id="autres"  title="Informations complémentaires" titleStyle="background-color: #f88b2e;background-image: none">
			  <h:panelGroup rendered="#{demandeController.panelEntreprise}"> 
					   <div class="box box-success box-solid">
					 
		              <div class="box-header with-border">
		               <div class="col-md-4"><div  style="color: #fff">LISTE DES ENTRERISES SOUMISSIONNAIRES</div></div>
		               
		           <div class="col-sm-3">
                   </div>
                   
                   <div class="col-sm-4">
				    <p:commandLink oncomplete="PF('dlogEntreprise').show()" styleClass="btn btn-warning btn-rounded waves-effect waves-light" style="color:#fff;background-color: #f88b2e" update=":content" >
				      <span class="btn-label"><i class="fa fa-plus"></i></span><span class="hidden-xs">AJOUTER ENTREPRISE </span>
				   </p:commandLink>
			       </div>
		             </div>
		             
		                      
		         <div class="box-body">
		           <div class="row">                   
		            <div class="col-md-12">
		                <div class="input-group input-group-sm col-md-4">
				                <span class="input-group-btn">
				                <p:commandLink action="#{daoController.chargeRecherchePPM()}" styleClass="btn btn-warning btn-flat" value="Initialiser" style=" background-color: #f88b2e"  />
				                </span>
			                      <p:inputText value="#{commissionController.dofNum}" styleClass="form-control" type="text"  placeholder="Effectuer une recherche"></p:inputText> 
			                       <span class="input-group-btn">
			                      <p:commandLink action="#{commissionController.chargeOffreFilterOffre()}" styleClass="btn btn-success btn-flat" value="Rechercher" style=" background-color: #036d3b"  />
			                    </span>
						  </div> 
		                 </div>
                      </div>    
                 
               <p:dataTable id="tblEntreprises" styleClass="table mb0 dt-on-steroids dataTable" var="slctdTb" value="#{demandeController.listeSoumission}" 
				scrollable="true" scrollHeight="270" emptyMessage="Aucun soumissionnaire trouvé" rows="5">
                         
                        
                         <p:column headerText="Ncc" styleClass="col-sm-1" >
         				<h:outputText value="#{slctdTb.souNcc}" />
				        </p:column>

				        <p:column headerText="Nom Commercial" styleClass="col-sm-7" >
         				<h:outputText value="#{slctdTb.souNomCom}" />
				        </p:column>
				       
         				 <p:column headerText="Sigle" styleClass="col-sm-1" >
         				<h:outputText value="#{slctdTb.souSigleSte}" />
				        </p:column> 
				        
				          <p:column headerText="Adresse" styleClass="col-sm-2">  
         				  <h:outputText value="#{slctdTb.souAdresse}" />
				        </p:column>
				        
         				<p:column headerText="Telephone" styleClass="col-sm-1" >
         				<h:outputText value="#{slctdTb.souTel}" />
				        </p:column>
				        
				        <p:column headerText="Actions" width="5%" >
         				  <p:commandLink styleClass="btn btn-xs btn-danger" style= "margin-left:5px" action="#{demandeController.deleteEntreprise()}" title="Supprimer" update=":gnl:tblEntreprises">
			               <i class="ace-icon fa fa-trash bigger-120"  style="color: white"></i>  
			               <p:confirm header="Confirmation" message="Etes-vous sûr de vouloir supprimer ?" icon="ui-icon-alert" />                              
			               <f:setPropertyActionListener value="#{slctdTb}" target="#{demandeController.sltEnt}" />
			              </p:commandLink>
				        </p:column>
				        
                    </p:dataTable>
		             </div>
		            
			      </div>
			  
			      </h:panelGroup>
			      
			   <div class="box box-success box-solid">
               <div class="box-header with-border">
                <div class="col-md-12 ">
                   <div  style="color: #fff">CHOISIR LE(S) PIECES DE LA DEMANDE</div>
                 </div>
                </div>
               <div class="box-body">
                      <p:dataTable id="tblPiece" styleClass="table mb0 dt-on-steroids dataTable" var="slctdTb" value="#{demandeController.listePieces}"
					    rowKey="#{slctdTb.pidNum}"	selection="#{demandeController.selectionPieces}" 
				         scrollable="true" scrollHeight="230" emptyMessage="Aucune pièce trouvée">
                         <p:column selectionMode="multiple" style="width:40px;text-align:center" />
                          <p:column headerText="Pièces" styleClass="col-sm-12" >
         				<h:outputText value="#{slctdTb.pidLibeleLong}" />
				        </p:column>
    
                      </p:dataTable>
                      
                      </div>
                      <div class="box-footer">
                         <p:commandLink action="#{demandeController.savePieces()}" styleClass="btn btn-success row pull-right" style="background-color: #036d3b; margin-right:5px;color:#fff"   update=":content">
					            <p:confirm header="Confirmation" message="Confirmez vous l'enregistrement?" icon="ui-icon-alert" />
					             <i class="ace-icon fa fa-save"></i> Enregistrer  
			      </p:commandLink>
                      </div>
                   
                     </div>
			      
			        </p:tab>
			         
			        </p:wizard>
			         
            
        
        </div>
	 </div>
    
      <div class="row">
       <br/>
        <p:commandLink  styleClass="btn btn-warning mr10 " style=" background-color: #f88b2e" action="#{demandeController.renderPage('dem1','LISDEMSAI')}" update=":content">
		<i class="ace-icon fa fa-close bigger-130"></i> Fermer
		</p:commandLink>

     </div>
            
    </section>
    </h:form>
    
    
    <h:form id="dlogEntreprise" styleClass="form-horizontal">
	  <p:dialog  widgetVar="dlogEntreprise" modal="true"  showEffect="fade" hideEffect="fade" height="80%" width="50%" closable="true" header="">
	    <div class="row">    
            <div class="col-md-12">
                
                
                          <div class="box box-success box-solid">
        <div class="box-header with-border">
          <div class="col-md-7">  <div  style="color: #fff">AJOUTER L'ENTREPRISE SOUMISSIONNAIRE</div></div>
         </div>

        <div class="box-body">
             <div class="form-group">
   			<div class="col-md-12 align justify-content-center">
                   <fieldset style="border: 1px solid #ffb380 ;padding: 5px;border-radius:4px">
                   <legend style="font-weight: bold"><small>Identification de l'entreprise</small></legend>		                
                       <p:messages id="message1" showDetail="false" autoUpdate="true"  closable="true"/>
		                  <div class="form-group horizontal">
		                      <label  class="col-sm-2 control-label text-right"><b>Ncc :<span style="color:red;"> *</span></b></label>
		                      <div class="col-sm-10">
				                <table>
							        <tr>
		                            <td style="width: 800px">
		                            <p:inputText value="#{demandeController.newSoum.souNcc}" type="text" styleClass="form-control" style="width:100%" />
		                            </td>		                 
		                            <td>
									        <p:commandLink action="#{demandeController.verifierNumNcc()}"  title="Sélectionnez l'entreprise" styleClass="btn btn-warning"  style="color:#fff;background-color: #f88b2e" update=":dlogEntreprise:infopEnt">
										    	<i class="fa fa-search"></i>
										    </p:commandLink>
								        </td>
			                       <td style="width:1510px">
			                       <h:panelGroup id="idncc">
			                      
			                       </h:panelGroup>
			                       </td>
							        </tr>
				                </table>
			                </div>
		                  </div>
		                  <h:panelGroup id="infopEnt">
		                   <div class="form-group horizontal">
		                      <label  class="col-sm-2 control-label text-right"><b> Sigle :</b></label>
		                      <div class="col-sm-10">
		                        <p:inputText value="#{demandeController.newSoum.souSigleSte}" readonly="true" type="text" styleClass="form-control"  style="width: 100%"/>
		                      </div>
		                  </div>
		                   <div class="form-group horizontal">
		                      <label  class="col-sm-2 control-label text-right"><b> Nom commercial :</b></label>
		                      <div class="col-sm-10">
		                        <p:inputText value="#{demandeController.newSoum.souNomCom}" readonly="true" type="text" styleClass="form-control"  style="width: 100%"/>
		                      </div>
		                  </div>
		                   <div class="form-group horizontal">
		                      <label  class="col-sm-2 control-label text-right"><b> Adresse :</b></label>
		                      <div class="col-sm-10">
		                        <p:inputText value="#{demandeController.newSoum.souAdresse}" readonly="true" type="text" styleClass="form-control"  style="width: 100%"/>
		                      </div>
		                  </div>
                         </h:panelGroup>
		                
                    </fieldset>
                  </div>
                    </div>
          
         <div class="row">
         </div>
         </div>
            <div class="pull-right ">
			            <p:commandLink  styleClass="btn btn-success row pull-right" style="background-color: #036d3b; margin-right:1px;color:#fff;margin-top:10px" action="#{demandeController.saveEntrepsises()}" oncomplete="PF('dlogEntreprise').hide()" update=":gnl:tblEntreprises" >
			             <i class="ace-icon fa fa-save"></i> Ajouter
			            </p:commandLink>
                     </div>
         
         </div>
                   
         
                    
                  
                    
                    
                    
            
            
            
            <h:panelGroup rendered="false">
                    <div class="box box-success box-solid">
        <div class="box-header with-border">
          <div class="col-md-7">  <div  style="color: #fff">SAISIE DES ENTREPRISES SOUMISSIONNAIRES</div></div>
         </div>

        <div class="box-body">
        
         <div class="row">                   
		            <div class="col-md-12">
		                <div class="input-group input-group-sm col-md-4">
				                <span class="input-group-btn">
				                <p:commandLink action="#{demandeController.chargeEntreprses()}" styleClass="btn btn-warning btn-flat" value="Initialiser" style=" background-color: #f88b2e" update="dlogEntreprise:ndTbleScc" />
				                </span>
			                      <p:inputText value="#{demandeController.critere}" styleClass="form-control" type="text"  placeholder="Effectuer une recherche"></p:inputText> 
			                       <span class="input-group-btn">
			                      <p:commandLink action="#{demandeController.chargeEntreprsesFilter()}" styleClass="btn btn-success btn-flat" value="Rechercher" style=" background-color: #036d3b" update="dlogEntreprise:ndTbleScc" />
			                    </span>
						  </div> 
		                 </div>
                      </div>
        
                 
		      <p:dataTable id="ndTbleScc" styleClass="table mb0 dt-on-steroids dataTable" var="slctdTb" value="#{demandeController.listeEntreprises}" emptyMessage="Aucune entreprise trouvée" rows="10"
					    rowKey="#{slctdTb.souNcc}" selection="#{demandeController.selectionEntreprises}"
                         draggableColumns="true" scrollable="true" scrollHeight="250">
                           <p:column selectionMode="multiple" style="width:30px;text-align:center"/>
                           
                         <p:column headerText="Ncc" styleClass="col-sm-1" >
         				<h:outputText value="#{slctdTb.souNcc}" />
				        </p:column>

				        <p:column headerText="Nom Commercial" styleClass="col-sm-7" >
         				<h:outputText value="#{slctdTb.souNomCom}" />
				        </p:column>
				       
         				 <p:column headerText="Sigle" styleClass="col-sm-1" >
         				<h:outputText value="#{slctdTb.souSigleSte}" />
				        </p:column> 
				        
				          <p:column headerText="Adresse" styleClass="col-sm-2">  
         				  <h:outputText value="#{slctdTb.souAdresse}" />
				        </p:column>
				        
         				<p:column headerText="Telephone" styleClass="col-sm-1" >
         				<h:outputText value="#{slctdTb.souTel}" />
				        </p:column>
                    
    </p:dataTable>   
                
                </div>
                 <div class="row">    
	             <div class="col-sm-8"></div>
	              <div class="col-sm-4">  
					
					      <div class="pull-right ">
			            <p:commandLink  styleClass="btn btn-success row pull-right" style="background-color: #036d3b; margin-right:5px;color:#fff;margin-top:15px" action="#{demandeController.saveEntrepsise()}" oncomplete="PF('dlogEntreprise').hide()" update=":gnl:tblEntreprises" >
			             <i class="ace-icon fa fa-save"></i> Ajouter
			            </p:commandLink>
                     </div>
                     
                     
                   </div>
              </div>
         </div>
         
		</h:panelGroup>          
              
         </div>
         </div>
         
		
      </p:dialog>
    </h:form>
    
    
    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade"  width="30%" height="25%" >
 		<div align="center">
        <p:commandButton value="Confirmer" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
        <p:commandButton value="Annuler" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
        </div>
    </p:confirmDialog>
    
</ui:define>
</ui:composition>
</html>
